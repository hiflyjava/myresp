(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27960f58"],{"3b20":function(e,t,a){"use strict";var o=a("89b8"),i=a.n(o);i.a},7259:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addjob"}},[a("titlebox",{attrs:{title:"ADD A NEW STAFF"}}),a("div",{staticClass:"personContent"},[a("el-row",{staticStyle:{overflow:"hidden"}},[a("el-col",{staticStyle:{overflow:"hidden"},attrs:{span:7}},[a("div",{staticClass:"rt"},[a("div",{staticClass:"fingerprint"}),a("button",{staticClass:"button printbtn"},[e._v(e._s(e.$t("editStaff.RecordDeviceID")))])])]),a("el-col",{attrs:{span:17}},[a("el-form",{ref:"addform",attrs:{model:e.addform,"label-width":"150px"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("personnel.personnelNO")},model:{value:e.addform.comment,callback:function(t){e.$set(e.addform,"comment",t)},expression:"addform.comment"}})],1),a("el-form-item",{attrs:{prop:"family name"}},[a("el-input",{attrs:{placeholder:e.$t("editStaff.name")},model:{value:e.addform.name,callback:function(t){e.$set(e.addform,"name",t)},expression:"addform.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("editStaff.lastName")},model:{value:e.addform.familyname,callback:function(t){e.$set(e.addform,"familyname",t)},expression:"addform.familyname"}})],1),a("el-form-item",{attrs:{prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off","show-password":"",placeholder:e.$t("editStaff.Password")},model:{value:e.addform.password,callback:function(t){e.$set(e.addform,"password",t)},expression:"addform.password"}})],1),a("el-form-item",{attrs:{prop:"telephone"}},[a("el-input",{attrs:{placeholder:e.$t("editStaff.Phone")},model:{value:e.addform.phone,callback:function(t){e.$set(e.addform,"phone",t)},expression:"addform.phone"}})],1),a("el-form-item",{staticClass:"roles"},[a("country")],1),a("el-form-item",{staticClass:"roles"},[a("el-cascader",{attrs:{clearable:"",options:e.departmentList,"show-all-levels":!1,props:e.defaultParams,placeholder:e.$t("common.department")},on:{change:e.changeDpartment},model:{value:e.adddepartmentValue,callback:function(t){e.adddepartmentValue=t},expression:"adddepartmentValue"}})],1),a("el-form-item",{staticClass:"roles",attrs:{placeholder:"Position"}},[a("el-select",{attrs:{placeholder:e.$t("common.position"),clearable:""},on:{change:e.changePosition},model:{value:e.addpositionValue,callback:function(t){e.addpositionValue=t},expression:"addpositionValue"}},e._l(e.positionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("editStaff.startTime"),"value-format":"HH:mm:ss"},model:{value:e.startTimeValue,callback:function(t){e.startTimeValue=t},expression:"startTimeValue"}})],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("editStaff.endTime"),"value-format":"HH:mm:ss"},model:{value:e.endTimeValue,callback:function(t){e.endTimeValue=t},expression:"endTimeValue"}})],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.Overtime"),"value-format":"HH:mm:ss"},model:{value:e.addTimeValue,callback:function(t){e.addTimeValue=t},expression:"addTimeValue"}})],1),a("el-form-item",{attrs:{prop:"phone"}},[a("el-select",{attrs:{placeholder:e.$t("editStaff.sex")},model:{value:e.addform.sex,callback:function(t){e.$set(e.addform,"sex",t)},expression:"addform.sex"}},[a("el-option",{attrs:{label:e.$t("editStaff.male"),value:"1"}}),a("el-option",{attrs:{label:e.$t("editStaff.female"),value:"2"}})],1)],1),a("div",{staticClass:"work_status"},[a("el-form-item",[a("el-form-item",{attrs:{prop:"checkinDate"}},[a("el-date-picker",{ref:"checkDate",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("editStaff.EntryDate")},model:{value:e.addform.checkinDate,callback:function(t){e.$set(e.addform,"checkinDate",t)},expression:"addform.checkinDate"}})],1)],1)],1),a("button",{staticClass:"button confirm",on:{click:e.addSave}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)],1)],1)},i=[],s=a("bd86"),d=(a("7f7f"),a("7ed4")),n={data:function(){return{defaultParams:{label:"name",value:"id",children:"children",expandTrigger:"hover"},startTimeValue:"",endTimeValue:"",addTimeValue:"",select:"",tableData:[],editVisible:!1,editform:{name:""},timeValue:"",addcompanyValue:"",addpositionValue:"",addcountryValue:"",adddepartmentValue:[],companyList:[],positionList:[],countryList:[],timeList:[],departmentList:[],AddJobName:"",addVisible:!1,idx:"",select_word:"",country_word:"",addform:{name:"",phone:"",address:"",roles:[],type:"",comment:"",password:"",familyname:"",status:"",sex:"",startValue:"9:00",endValue:"6:00",country:"",checkinDate:""},sex:"",eid:JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id}},created:function(){var e=this;this.getPosition(),this.getDepartment(),d["a"].$on("countryname",function(t){e.addform.country=t})},methods:{getDepartment:function(){var e=this;this.postRequest("/system/basic/depTrees",{entityId:window.localStorage.getItem("eid")||this.eid}).then(function(t){t&&200==t.status&&(console.log(t.data),e.departmentList=e.getTreeData(t.data.obj))})},getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].children.length<1?e[t].children=void 0:this.getTreeData(e[t].children);return e},changeDpartment:function(){this.getPosition()},changePosition:function(){this.getTimes()},getPosition:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/basic/getChildrenDepsPosition",{entityId:window.localStorage.getItem("eid")||this.eid,id:this.adddepartmentValue[t]||""}).then(function(t){if(t&&200==t.status){console.log(t.data.obj);var a=t.data.obj.map(function(e){var t=e.name,a=e.id,o=e.startTime,i=e.endTime,s=e.addTime;return{name:t,id:a,startTime:o,endTime:i,addTime:s}});e.positionList=a}})},getTimes:function(){var e=this;this.positionList.map(function(t){t.id==e.addpositionValue&&(e.startTimeValue=t.startTime,e.endTimeValue=t.endTime,e.addTimeValue=t.addTime)})},refreshAction:function(){},addSave:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/staff/addStaff",Object(s["a"])({entityId:window.localStorage.getItem("eid")||this.eid,name:this.addform.name,phone:this.addform.phone,surname:this.addform.familyname,departmentId:this.adddepartmentValue[t],positionId:this.addform.addpositionValue,country:this.addform.country,startTime:this.startTimeValue,endTime:this.endTimeValue,addTime:this.addTimeValue,unlockPassword:this.addform.password,jointime:this.addform.checkinDate,userNo:this.addform.comment,sex:this.addform.sex},"positionId",this.addpositionValue)).then(function(t){t&&200==t.status&&(console.log(t),e.$message.success("Added Successfully"))}),this.$router.push({name:"Staff Management"})}}},l=n,r=(a("3b20"),a("2877")),m=Object(r["a"])(l,o,i,!1,null,null,null);t["default"]=m.exports},"89b8":function(e,t,a){}}]);