(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74af2f72","chunk-27960f58","chunk-259c21a8"],{"1c15":function(e,t,a){"use strict";var i=a("ef82"),s=a.n(i);s.a},"32a1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"job_table"}},[i("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[i("el-col",{staticClass:"handle_input",attrs:{span:9}},[i("el-input",{attrs:{placeholder:e.$t("personnel.searchplaceholder"),clearable:!0},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}})],1),i("el-col",{attrs:{span:2}},[i("button",{staticClass:"search button",on:{click:e.handleSearch}},[e._v(e._s(e.$t("common.search")))])]),i("el-col",{attrs:{span:13}},[i("button",{staticClass:"button addOrder rt",on:{click:e.handleAdd}},[e._v(e._s(e.$t("personnel.addPosition")))]),i("span",{staticClass:"refresh rt",on:{click:e.refreshAction}},[i("img",{attrs:{src:a("b956"),alt:""}})])])],1),i("el-table",{ref:"multipleTable",staticClass:"table_inp loading-area",attrs:{data:e.tableData,border:"",id:"table_style"}},[i("el-table-column",{attrs:{prop:"userNo",label:e.$t("personnel.personnelNO"),"min-width":"130"}}),i("el-table-column",{attrs:{prop:"name",label:e.$t("personnel.name"),width:"150"}}),i("el-table-column",{attrs:{prop:"surname",label:e.$t("personnel.username"),width:"150"}}),i("el-table-column",{attrs:{prop:"phone",label:e.$t("personnel.phone"),"min-width":"150"}}),i("el-table-column",{attrs:{prop:"pname",label:e.$t("personnel.position"),"min-width":"120"}}),i("el-table-column",{attrs:{prop:"dname",label:e.$t("common.Department"),"min-width":"120"}}),i("el-table-column",{attrs:{prop:"startTime",label:e.$t("personnel.startTime"),"min-width":"120"}}),i("el-table-column",{attrs:{prop:"endTime",label:e.$t("personnel.endTime"),"min-width":"120"}}),i("el-table-column",{attrs:{prop:"addTime",label:e.$t("personnel.addTime"),"min-width":"120"}}),i("el-table-column",{attrs:{label:e.$t("common.action"),"min-width":"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("common.Edit"),placement:"left"}},[i("img",{attrs:{src:a("162a"),alt:""},on:{click:function(a){e.handleEdit(t.$index,t.row)}}})])]}}])})],1)],1)},s=[],o=(a("7f7f"),a("7ed4")),n={data:function(){return{tableData:[],AddJobName:"",idx:"",select_word:"",eid:JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id}},created:function(){this.getJobData()},methods:{getJobData:function(){var e=this;this.postRequest("/system/staff/getStaffList",{entityId:window.localStorage.getItem("eid")||this.eid,name:this.select_word}).then(function(t){if(t&&200==t.status){console.log(t.data);var a=t.data.data.list.map(function(e){var t=e.name,a=e.surname,i=e.id,s=e.pcname,o=e.dname,n=e.timeId,r=e.enabled,l=e.country,d=e.address,m=e.pgshHotelEntityList,c=e.pname,u=e.phone,p=e.addTime,f=e.roles,h=e.endTime,b=e.startTime,y=e.departmentId,v=e.positionId,g=e.userNo,$=e.unlockPassword,T=e.sex;return 1==T&&(T="男"),2==T&&(T="女"),{name:t,surname:a,timeId:n,dname:o,enabled:r,id:i,pcname:s,country:l,address:d,pgshHotelEntityList:m,pname:c,phone:u,addTime:p,roles:f,endTime:h,startTime:b,departmentId:y,positionId:v,userNo:g,unlockPassword:$,sex:T}});e.tableData=a}})},refreshAction:function(){},handleSearch:function(){this.getJobData()},handleEdit:function(e,t){"男"==this.tableData[e].sex&&(this.tableData[e].sex=1),"女"==this.tableData[e].sex&&(this.tableData[e].sex=2),o["a"].$emit("editcountry",this.tableData[e].pcname,this.tableData[e].country),this.$router.push({name:"Edit Staff",query:{index:e,name:this.tableData[e].name,surname:this.tableData[e].surname,id:this.tableData[e].id,country:this.tableData[e].country,phone:this.tableData[e].phone,endTime:this.tableData[e].endTime,startTime:this.tableData[e].startTime,addTime:this.tableData[e].addTime,userNo:this.tableData[e].userNo,sex:this.tableData[e].sex,departmentId:this.tableData[e].departmentId,positionId:this.tableData[e].positionId,unlockPassword:this.tableData[e].unlockPassword,pcname:this.tableData[e].pcname,enabled:this.tableData[e].enabled}})},EditSave:function(){var e=this,t=this.tableData[this.idx].id;this.postRequest("/system/basic/updatePosition",{entityId:window.localStorage.getItem("eid")||this.eid,id:t,name:this.editform.name}).then(function(t){t&&200==t.status&&(e.getJobData(),e.editVisible=!1)})},handleAdd:function(){this.$router.push({name:"Add Staff"})},addSave:function(){var e=this;this.postRequest("/system/basic/addPosition",{entityId:window.localStorage.getItem("eid")||this.eid,name:this.AddJobName}).then(function(t){t&&200==t.status&&(e.getJobData(),e.addVisible=!1)})}}},r=n,l=(a("1c15"),a("2877")),d=Object(l["a"])(r,i,s,!1,null,null,null);t["default"]=d.exports},"3b20":function(e,t,a){"use strict";var i=a("89b8"),s=a.n(i);s.a},"49b0":function(e,t,a){"use strict";var i=a("c2e7"),s=a.n(i);s.a},7259:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addjob"}},[a("titlebox",{attrs:{title:"ADD A NEW STAFF"}}),a("div",{staticClass:"personContent"},[a("el-row",{staticStyle:{overflow:"hidden"}},[a("el-col",{staticStyle:{overflow:"hidden"},attrs:{span:7}},[a("div",{staticClass:"rt"},[a("div",{staticClass:"fingerprint"}),a("button",{staticClass:"button printbtn"},[e._v(e._s(e.$t("editStaff.RecordDeviceID")))])])]),a("el-col",{attrs:{span:17}},[a("el-form",{ref:"addform",attrs:{model:e.addform,"label-width":"150px"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("personnel.personnelNO")},model:{value:e.addform.comment,callback:function(t){e.$set(e.addform,"comment",t)},expression:"addform.comment"}})],1),a("el-form-item",{attrs:{prop:"family name"}},[a("el-input",{attrs:{placeholder:e.$t("editStaff.name")},model:{value:e.addform.name,callback:function(t){e.$set(e.addform,"name",t)},expression:"addform.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("editStaff.lastName")},model:{value:e.addform.familyname,callback:function(t){e.$set(e.addform,"familyname",t)},expression:"addform.familyname"}})],1),a("el-form-item",{attrs:{prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off","show-password":"",placeholder:e.$t("editStaff.Password")},model:{value:e.addform.password,callback:function(t){e.$set(e.addform,"password",t)},expression:"addform.password"}})],1),a("el-form-item",{attrs:{prop:"telephone"}},[a("el-input",{attrs:{placeholder:e.$t("editStaff.Phone")},model:{value:e.addform.phone,callback:function(t){e.$set(e.addform,"phone",t)},expression:"addform.phone"}})],1),a("el-form-item",{staticClass:"roles"},[a("country")],1),a("el-form-item",{staticClass:"roles"},[a("el-cascader",{attrs:{clearable:"",options:e.departmentList,"show-all-levels":!1,props:e.defaultParams,placeholder:e.$t("common.department")},on:{change:e.changeDpartment},model:{value:e.adddepartmentValue,callback:function(t){e.adddepartmentValue=t},expression:"adddepartmentValue"}})],1),a("el-form-item",{staticClass:"roles",attrs:{placeholder:"Position"}},[a("el-select",{attrs:{placeholder:e.$t("common.position"),clearable:""},on:{change:e.changePosition},model:{value:e.addpositionValue,callback:function(t){e.addpositionValue=t},expression:"addpositionValue"}},e._l(e.positionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("editStaff.startTime"),"value-format":"HH:mm:ss"},model:{value:e.startTimeValue,callback:function(t){e.startTimeValue=t},expression:"startTimeValue"}})],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("editStaff.endTime"),"value-format":"HH:mm:ss"},model:{value:e.endTimeValue,callback:function(t){e.endTimeValue=t},expression:"endTimeValue"}})],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.Overtime"),"value-format":"HH:mm:ss"},model:{value:e.addTimeValue,callback:function(t){e.addTimeValue=t},expression:"addTimeValue"}})],1),a("el-form-item",{attrs:{prop:"phone"}},[a("el-select",{attrs:{placeholder:e.$t("editStaff.sex")},model:{value:e.addform.sex,callback:function(t){e.$set(e.addform,"sex",t)},expression:"addform.sex"}},[a("el-option",{attrs:{label:e.$t("editStaff.male"),value:"1"}}),a("el-option",{attrs:{label:e.$t("editStaff.female"),value:"2"}})],1)],1),a("div",{staticClass:"work_status"},[a("el-form-item",[a("el-form-item",{attrs:{prop:"checkinDate"}},[a("el-date-picker",{ref:"checkDate",attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("editStaff.EntryDate")},model:{value:e.addform.checkinDate,callback:function(t){e.$set(e.addform,"checkinDate",t)},expression:"addform.checkinDate"}})],1)],1)],1),a("button",{staticClass:"button confirm",on:{click:e.addSave}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)],1)],1)},s=[],o=a("bd86"),n=(a("7f7f"),a("7ed4")),r={data:function(){return{defaultParams:{label:"name",value:"id",children:"children",expandTrigger:"hover"},startTimeValue:"",endTimeValue:"",addTimeValue:"",select:"",tableData:[],editVisible:!1,editform:{name:""},timeValue:"",addcompanyValue:"",addpositionValue:"",addcountryValue:"",adddepartmentValue:[],companyList:[],positionList:[],countryList:[],timeList:[],departmentList:[],AddJobName:"",addVisible:!1,idx:"",select_word:"",country_word:"",addform:{name:"",phone:"",address:"",roles:[],type:"",comment:"",password:"",familyname:"",status:"",sex:"",startValue:"9:00",endValue:"6:00",country:"",checkinDate:""},sex:"",eid:JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id}},created:function(){var e=this;this.getPosition(),this.getDepartment(),n["a"].$on("countryname",function(t){e.addform.country=t})},methods:{getDepartment:function(){var e=this;this.postRequest("/system/basic/depTrees",{entityId:window.localStorage.getItem("eid")||this.eid}).then(function(t){t&&200==t.status&&(console.log(t.data),e.departmentList=e.getTreeData(t.data.obj))})},getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].children.length<1?e[t].children=void 0:this.getTreeData(e[t].children);return e},changeDpartment:function(){this.getPosition()},changePosition:function(){this.getTimes()},getPosition:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/basic/getChildrenDepsPosition",{entityId:window.localStorage.getItem("eid")||this.eid,id:this.adddepartmentValue[t]||""}).then(function(t){if(t&&200==t.status){console.log(t.data.obj);var a=t.data.obj.map(function(e){var t=e.name,a=e.id,i=e.startTime,s=e.endTime,o=e.addTime;return{name:t,id:a,startTime:i,endTime:s,addTime:o}});e.positionList=a}})},getTimes:function(){var e=this;this.positionList.map(function(t){t.id==e.addpositionValue&&(e.startTimeValue=t.startTime,e.endTimeValue=t.endTime,e.addTimeValue=t.addTime)})},refreshAction:function(){},addSave:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/staff/addStaff",Object(o["a"])({entityId:window.localStorage.getItem("eid")||this.eid,name:this.addform.name,phone:this.addform.phone,surname:this.addform.familyname,departmentId:this.adddepartmentValue[t],positionId:this.addform.addpositionValue,country:this.addform.country,startTime:this.startTimeValue,endTime:this.endTimeValue,addTime:this.addTimeValue,unlockPassword:this.addform.password,jointime:this.addform.checkinDate,userNo:this.addform.comment,sex:this.addform.sex},"positionId",this.addpositionValue)).then(function(t){t&&200==t.status&&(console.log(t),e.$message.success("Added Successfully"))}),this.$router.push({name:"Staff Management"})}}},l=r,d=(a("3b20"),a("2877")),m=Object(d["a"])(l,i,s,!1,null,null,null);t["default"]=m.exports},"89b8":function(e,t,a){},c2e7:function(e,t,a){},d8b9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"editjob"}},[a("titlebox",{attrs:{title:"EDIT STAFF"}}),a("div",{staticClass:"personContent"},[a("el-row",{staticStyle:{overflow:"hidden"}},[a("el-col",{staticStyle:{overflow:"hidden"},attrs:{span:7}},[a("div",{staticClass:"rt"},[a("div",{staticClass:"fingerprint"}),a("button",{staticClass:"button printbtn"},[e._v(e._s(e.$t("editStaff.RecordDeviceID")))])])]),a("el-col",{attrs:{span:17}},[a("el-form",{ref:"addform",attrs:{model:e.editform,"label-width":"150px"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("personnel.personnelNO")},model:{value:e.editform.userNo,callback:function(t){e.$set(e.editform,"userNo",t)},expression:"editform.userNo"}})],1),a("el-form-item",{attrs:{prop:"family name"}},[a("el-input",{attrs:{placeholder:e.$t("common.name")},model:{value:e.editform.name,callback:function(t){e.$set(e.editform,"name",t)},expression:"editform.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:e.$t("common.lastname")},model:{value:e.editform.familyname,callback:function(t){e.$set(e.editform,"familyname",t)},expression:"editform.familyname"}})],1),a("el-form-item",{attrs:{prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off","show-password":"",placeholder:e.$t("editStaff.Password")},model:{value:e.editform.password,callback:function(t){e.$set(e.editform,"password",t)},expression:"editform.password"}})],1),a("el-form-item",{attrs:{prop:"telephone"}},[a("el-input",{attrs:{placeholder:e.$t("editStaff.Phone")},model:{value:e.editform.phone,callback:function(t){e.$set(e.editform,"phone",t)},expression:"editform.phone"}})],1),a("el-form-item",{staticClass:"roles"},[a("country")],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.startTime"),"value-format":"HH:mm:ss"},model:{value:e.startTimeValue,callback:function(t){e.startTimeValue=t},expression:"startTimeValue"}})],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.endtime"),"value-format":"HH:mm:ss"},model:{value:e.endTimeValue,callback:function(t){e.endTimeValue=t},expression:"endTimeValue"}})],1),a("el-form-item",[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.Overtime"),"value-format":"HH:mm:ss"},model:{value:e.addTimeValue,callback:function(t){e.addTimeValue=t},expression:"addTimeValue"}})],1),a("el-form-item",{attrs:{prop:"phone"}},[a("el-select",{attrs:{placeholder:e.$t("editStaff.sex")},model:{value:e.editform.sex,callback:function(t){e.$set(e.editform,"sex",t)},expression:"editform.sex"}},[a("el-option",{attrs:{label:e.$t("editStaff.male"),value:1}}),a("el-option",{attrs:{label:e.$t("editStaff.female"),value:2}})],1)],1),a("el-form-item",{staticClass:"roles"},[a("el-cascader",{attrs:{clearable:"",options:e.departmentList,"show-all-levels":!1,props:e.defaultParams,placeholder:e.$t("common.department")},on:{change:e.changeDpartment},model:{value:e.adddepartmentValue,callback:function(t){e.adddepartmentValue=t},expression:"adddepartmentValue"}})],1),a("el-form-item",{staticClass:"roles",attrs:{placeholder:"Position"}},[a("el-select",{attrs:{placeholder:e.$t("common.position"),clearable:""},model:{value:e.addpositionValue,callback:function(t){e.addpositionValue=t},expression:"addpositionValue"}},e._l(e.positionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),a("div",{staticClass:"work_status"},[a("el-form-item",[a("el-select",{attrs:{placeholder:e.$t("editStaff.status")},model:{value:e.editform.status,callback:function(t){e.$set(e.editform,"status",t)},expression:"editform.status"}},[a("el-option",{attrs:{label:e.$t("editStaff.Active"),value:1}}),a("el-option",{attrs:{label:e.$t("editStaff.Resigned"),value:2}})],1)],1)],1),a("button",{staticClass:"button confirm",on:{click:e.editSave}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)],1)],1)},s=[],o=(a("7f7f"),a("cadf"),a("551c"),a("097d"),a("7ed4")),n={data:function(){return{defaultParams:{label:"name",value:"id",children:"children",expandTrigger:"hover"},startTimeValue:this.$route.query.startTime,endTimeValue:this.$route.query.endTime,addTimeValue:this.$route.query.addTime,select:"",tableData:[],editVisible:!1,editform:{name:this.$route.query.name,phone:this.$route.query.phone,userNo:this.$route.query.userNo,password:this.$route.query.unlockPassword,familyname:this.$route.query.surname,status:this.$route.query.enabled,sex:this.$route.query.sex,country:this.$route.query.pcname,checkinDate:"",countryId:this.$route.query.country},timeValue:this.$route.query.timeId,addcompanyValue:"",addpositionValue:this.$route.query.positionId,addcountryValue:this.$route.query.country,adddepartmentValue:[this.$route.query.departmentId]||!1,companyList:[],positionList:[],countryList:[],timeList:[],departmentList:[],AddJobName:"",addVisible:!1,idx:"",editId:this.$route.query.id,select_word:"",country_word:"",eid:JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id}},mounted:function(){this.getEditData()},created:function(){var e=this;this.getPosition(),this.getDepartment(),o["a"].$on("countryname",function(t){e.editform.countryId=t})},methods:{changeDetSelect:function(e,t){var a=[],i=[],s=0;function o(t,n){for(var r=0;r<t.length;r++){if(s=n,a[n]=t[r].id,t[r].id==e){i=a.slice(0,n+1);break}t[r].children&&(s++,o(t[r].children,s))}return i}return o(t,s)},getEditData:function(){this.editform.name=this.$route.query.name,this.editform.phone=this.$route.query.phone,this.editform.userNo=this.$route.query.userNo,this.editform.password=this.$route.query.unlockPassword,this.editform.sex=this.$route.query.sex,this.editform.familyname=this.$route.query.surname,this.editform.status=this.$route.query.enabled,this.startTimeValue=this.$route.query.startTime,this.endTimeValue=this.$route.query.endTime,this.addTimeValue=this.$route.query.addTime,this.addpositionValue=this.$route.query.positionId,this.adddepartmentValue=this.changeDetSelect(this.$route.query.departmentId,this.departmentList),this.getPosition()},getDepartment:function(){var e=this;this.postRequest("/system/basic/depTrees",{entityId:window.localStorage.getItem("eid")||this.eid}).then(function(t){t&&200==t.status&&(e.departmentList=e.getTreeData(t.data.obj),e.getEditData())})},getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].children.length<1?e[t].children=void 0:this.getTreeData(e[t].children);return e},changeDpartment:function(){this.getPosition()},getPosition:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/basic/getChildrenDepsPosition",{entityId:window.localStorage.getItem("eid")||this.eid,id:this.adddepartmentValue[t]||""}).then(function(t){if(t&&200==t.status){console.log(t.data.obj);var a=t.data.obj.map(function(e){var t=e.name,a=e.id;return{name:t,id:a}});e.positionList=a}})},refreshAction:function(){},editSave:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/staff/updateStaff",{entityId:window.localStorage.getItem("eid")||this.eid,name:this.editform.name,phone:this.editform.phone,surname:this.editform.familyname,departmentId:this.adddepartmentValue[t],country:this.editform.countryId,startTime:this.startTimeValue,endTime:this.endTimeValue,addTime:this.addTimeValue,unlockPassword:this.editform.password,userNo:this.editform.userNo,sex:this.editform.sex,positionId:this.addpositionValue,id:this.editId}).then(function(t){t&&200==t.status&&e.$message.success("Saved Successfully")}),this.$router.push({name:"Staff Management"})}}},r=n,l=(a("49b0"),a("2877")),d=Object(l["a"])(r,i,s,!1,null,null,null);t["default"]=d.exports},ef82:function(e,t,a){}}]);