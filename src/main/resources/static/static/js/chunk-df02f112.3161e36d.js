(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df02f112"],{"0bc2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"originalData"}},[i("titlebox",{attrs:{title:t.$t("rawData.individual")}}),i("div",{staticClass:"orginal"},[i("el-row",{staticClass:"filter"},[i("el-col",{staticClass:"handle_input",attrs:{span:18}},[i("el-row",{staticClass:"type_bottom",attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-cascader",{attrs:{options:t.departmentList,"show-all-levels":!1,clearable:"",props:t.defaultParams,placeholder:t.$t("common.department")},on:{change:t.changeDpartment},model:{value:t.adddepartmentValue,callback:function(e){t.adddepartmentValue=e},expression:"adddepartmentValue"}}),i("el-date-picker",{ref:"checkDate",staticClass:"monthDate",staticStyle:{"margin-left":"20px","margin-top":"1px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":t.$t("common.from"),"end-placeholder":t.$t("common.to"),"default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.changeoriginalDate},model:{value:t.originaltime,callback:function(e){t.originaltime=e},expression:"originaltime"}}),i("button",{staticClass:"button",staticStyle:{"margin-left":"20px",height:"36px","line-height":"36px",width:"100px"},on:{click:t.searchOriginal}},[t._v(t._s(t.$t("common.search")))])],1)],1)],1),i("el-col",{staticClass:"right_btn",attrs:{span:6}},[i("span",{staticClass:"refresh fr",on:{click:t.refreshAction}},[i("img",{attrs:{src:a("b956"),alt:""}})]),i("button",{staticClass:"button addbtn"},[i("a",{attrs:{href:"#"}},[t._v(t._s(t.$t("common.EXPORTDATA")))])])])],1),i("el-table",{staticClass:"table_inp",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-table",{ref:"multipleTable",staticClass:"loading-area ",attrs:{data:e.row.originalAttenceDates,"max-height":"400"}},[i("el-table-column",{attrs:{prop:"dates",label:t.$t("rawData.date"),width:"120"}}),i("el-table-column",{attrs:{prop:"datas",label:t.$t("rawData.accessReport"),"min-width":"500",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.originalAttenceDatas,function(e,a){return i("span",{key:a,staticStyle:{"margin-right":"16px"},style:{color:t.getColor(e.status)}},[i("b",{directives:[{name:"show",rawName:"v-show",value:2==e.type,expression:"item.type == 2"}],staticStyle:{color:"red"}},[t._v("*")]),t._v("\n                                "+t._s(e.datas)+"\n                            ")])})}}])})],1)]}}])}),i("el-table-column",{attrs:{prop:"staffNo",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$t("rawData.staffId"))+": "+t._s(e.row.staffNo)+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"dname",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$t("rawData.Department"))+": "+t._s(e.row.dname)+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"pname",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$t("rawData.JobTitle"))+": "+t._s(e.row.pname)+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"staffName",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$t("rawData.FirstName"))+": "+t._s(e.row.staffName)+"\n                ")]}}])}),i("el-table-column",{attrs:{prop:"staffSurname","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.$t("rawData.LastName"))+": "+t._s(e.row.staffSurname)+"\n                ")]}}])}),i("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("common.Edit"),placement:"left"}},[i("img",{attrs:{src:a("162a"),alt:""},on:{click:function(a){t.handleAdd(e.$index,e.row)}}})])]}}])})],1),i("p",{staticStyle:{"margin-top":"6px"}},[t._v(t._s(t.$t("rawData.lateor"))),i("b",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("rawData.red"))+",")]),i("b",{staticStyle:{color:"red"}},[t._v(' "*" ')]),t._v(t._s(t.$t("rawData.ManuallyRevised")))]),i("el-dialog",{attrs:{title:"Attendance Record List",visible:t.originalVisible,top:"20vh",width:"50%"},on:{"update:visible":function(e){t.originalVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-dialog",{attrs:{width:"30%",title:t.$t("rawData.addinfo"),visible:t.addVisible,"append-to-body":"",top:"20vh"},on:{"update:visible":function(e){t.addVisible=e}}},[t._v("\n                    "+t._s(t.$t("rawData.selectTime"))+":\n                        "),i("el-date-picker",{ref:"checkDate",attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.addoriginaltime,callback:function(e){t.addoriginaltime=e},expression:"addoriginaltime"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{"background-color":"#6d6ad7",border:"1px solid #6d6ad7",color:"#fff"},on:{click:function(e){t.saveOriginal("addform")}}},[t._v(t._s(t.$t("rawData.save")))]),i("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))])],1)],1),i("el-dialog",{attrs:{width:"30%",title:t.$t("rawData.isdelete"),visible:t.deleteVisible,"append-to-body":"",top:"20vh"},on:{"update:visible":function(e){t.deleteVisible=e}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{"background-color":"#6d6ad7",border:"1px solid #6d6ad7",color:"#fff"},on:{click:function(e){t.deleteOriginal("addform")}}},[t._v(t._s(t.$t("rawData.delete")))]),i("el-button",{on:{click:function(e){t.deleteVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))])],1)]),i("el-dialog",{attrs:{width:"30%",title:t.$t("rawData.editinfo"),visible:t.editVisible,"append-to-body":"",top:"20vh"},on:{"update:visible":function(e){t.editVisible=e}}},[t._v("\n                    "+t._s(t.$t("rawData.selectTime"))+":\n                        "),i("el-date-picker",{ref:"checkDate",attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.editoriginaltime,callback:function(e){t.editoriginaltime=e},expression:"editoriginaltime"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{"background-color":"#6d6ad7",border:"1px solid #6d6ad7",color:"#fff"},on:{click:function(e){t.editOriginal("addform")}}},[t._v(t._s(t.$t("rawData.save")))]),i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))])],1)],1),i("el-row",{staticClass:"positionInfo"},[i("el-col",{attrs:{span:6}},[t._v("\n                            "+t._s(t.$t("editStaff.allname"))+": "),i("span",[t._v(t._s(t.positionform.name)+" "+t._s(t.positionform.surname))])]),i("el-col",{attrs:{span:7}},[t._v("\n                            "+t._s(t.$t("common.department"))+": "),i("span",[t._v(t._s(t.positionform.department))])]),i("el-col",{attrs:{span:5}},[t._v("\n                            "+t._s(t.$t("common.position"))+": "),i("span",[t._v(t._s(t.positionform.position))])]),i("el-col",{attrs:{span:6}},[i("button",{staticClass:"button fr",staticStyle:{height:"32px","line-height":"32px",width:"100px","margin-bottom":"20px"},on:{click:function(e){t.addVisible=!0}}},[t._v(t._s(t.$t("rawData.add")))])])],1),i("el-table",{ref:"multipleTable",staticClass:"loading-area ",attrs:{data:t.changerawdataList,border:"","max-height":"400"}},[i("el-table-column",{attrs:{prop:"time",label:t.$t("rawData.editRecord"),width:"180"}}),i("el-table-column",{attrs:{prop:"createdDate",label:t.$t("rawData.createDate"),"min-width":"180"}}),i("el-table-column",{attrs:{prop:"updatedDate",label:t.$t("rawData.updateDate"),"min-width":"180"}}),i("el-table-column",{attrs:{width:"100",align:"center",label:t.$t("common.action")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("common.Edit"),placement:"left"}},[i("img",{staticStyle:{"text-align":"center",display:"inline-block"},attrs:{src:a("162a"),alt:""},on:{click:function(a){t.handleEditRawData(e.$index,e.row)}}})]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("property.Delete"),placement:"top"}},[i("img",{staticStyle:{"text-align":"center",display:"inline-block","margin-left":"20px"},attrs:{src:a("fd6f"),alt:""},on:{click:function(a){t.handleDeleteRawData(e.$index,e.row)}}})])]}}])})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"bgcolor",attrs:{type:"primary"},on:{click:function(e){t.saveOriginal("addform")}}},[t._v(t._s(t.$t("rawData.save")))]),i("el-button",{on:{click:function(e){t.originalVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))])],1)],1)],1)],1)},n=[],s={data:function(){return{eid:window.localStorage.getItem("eid")||JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id,tableData:[],defaultParams:{label:"name",value:"id",children:"children",expandTrigger:"hover"},positionform:{id:"",name:"",surname:"",department:"",position:""},originaltime:[],addoriginaltime:"",editoriginaltime:"",adddepartmentValue:[],departmentList:[],yesTime:"",todayTime:"",weekTime:"",idx:"",originalVisible:!1,innerVisible:!1,addVisible:!1,editVisible:!1,deleteVisible:!1,changerawdataList:[],rawdataId:""}},created:function(){this.getDepartment(),this.getDate()},methods:{getDepartment:function(){var t=this;this.postRequest("/system/basic/depTrees",{entityId:window.localStorage.getItem("eid")||this.eid}).then(function(e){e&&200==e.status&&(t.departmentList=t.getTreeData(e.data.obj[0].children[0].children))})},getTreeData:function(t){for(var e=0;e<t.length;e++)t[e].children.length<1?t[e].children=void 0:this.getTreeData(t[e].children);return t},changeDpartment:function(){},changeoriginalDate:function(){},refreshAction:function(){this.getoriginalData()},getchangedsRawdata:function(){var t,e,a=this;this.originaltime&&0!=this.originaltime.length?(t=this.originaltime[0],e=this.originaltime[1]):(t=this.weekTime+" 00:00:00",e=this.yesTime+" 23:59:59"),this.postRequest("/sys/attence/getAddAttenceLog",{entityId:window.localStorage.getItem("eid")||this.eid,startTime:t,endTime:e,userId:this.tableData[this.idx].staffId}).then(function(t){t&&200==t.status&&(a.changerawdataList=t.data.obj)})},searchOriginal:function(){this.getoriginalData()},getoriginalData:function(t,e){var a=this;this.originaltime&&0!=this.originaltime.length?(t=this.originaltime[0],e=this.originaltime[1]):(t=this.weekTime+" 00:00:00",e=this.yesTime+" 23:59:59");var i=this.adddepartmentValue.length-1;this.postRequest("/sys/attence/getOriginalAttenceLog",{entityId:window.localStorage.getItem("eid")||this.eid,startTime:t,endTime:e,departmentId:this.adddepartmentValue[i]}).then(function(t){if(t&&200==t.status){var e=t.data.obj.map(function(t){var e=t.staffName,a=t.staffId,i=t.dname,n=t.pname,s=t.staffSurname,o=t.staffNo,l=t.originalAttenceDates;return{staffName:e,staffId:a,dname:i,pname:n,staffSurname:s,staffNo:o,originalAttenceDates:l}});a.tableData=e}})},getColor:function(t){var e;return 4==t&&(e="#000"),1!=t&&2!=t&&3!=t||(e="red"),e},handleAdd:function(t,e){this.idx=t,this.originalVisible=!0,this.positionform.name=this.tableData[t].staffName,this.positionform.surname=this.tableData[t].staffSurname,this.positionform.position=this.tableData[t].pname,this.positionform.department=this.tableData[t].dname,this.getchangedsRawdata()},handleEditRawData:function(t,e){this.editVisible=!0,this.editoriginaltime=this.changerawdataList[t].time,this.rawdataId=this.changerawdataList[t].id},handleDeleteRawData:function(t,e){this.deleteVisible=!0,this.rawdataId=this.changerawdataList[t].id},editOriginal:function(){var t=this;this.postRequest("/sys/attence/updateAttenceLog",{entityId:window.localStorage.getItem("eid")||this.eid,userId:this.tableData[this.idx].staffId,time:this.editoriginaltime,id:this.rawdataId}).then(function(e){e&&200==e.status&&(t.editVisible=!1,t.getchangedsRawdata(),t.getoriginalData(),t.$message.success("Added Successfully"))})},saveOriginal:function(){var t=this;this.postRequest("/sys/attence/addAttenceLog",{entityId:window.localStorage.getItem("eid")||this.eid,userId:this.tableData[this.idx].staffId,time:this.addoriginaltime}).then(function(e){e&&200==e.status&&(t.addVisible=!1,t.getchangedsRawdata(),t.getoriginalData(),t.$message.success("Added Successfully"))})},deleteOriginal:function(){var t=this;this.postRequest("/sys/attence/deleteAddAttenceLog",{id:this.rawdataId,userId:this.tableData[this.idx].staffId}).then(function(e){e&&200==e.status&&(t.deleteVisible=!1,t.getchangedsRawdata(),t.getoriginalData(),t.$message.success("Added Successfully"))})},getDate:function(){var t=new Date;this.todayTime=t.format("yyyy-MM-dd"),t=t.setTime(t.getTime()-864e5),this.yesTime=new Date(t).format("yyyy-MM-dd"),t=new Date(t).setTime(new Date(t).getTime()-6048e5),this.weekTime=new Date(t).format("yyyy-MM-dd"),this.getoriginalData()}}},o=s,l=(a("811a"),a("2877")),r=Object(l["a"])(o,i,n,!1,null,null,null);e["default"]=r.exports},"162a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU2NkExMDlBOTBBMjExRTk4RUZBOTIyOTgxNjY1NDBCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU2NkExMDlCOTBBMjExRTk4RUZBOTIyOTgxNjY1NDBCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTY2QTEwOTg5MEEyMTFFOThFRkE5MjI5ODE2NjU0MEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTY2QTEwOTk5MEEyMTFFOThFRkE5MjI5ODE2NjU0MEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5SC0V/AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlP/AOW3MEoAAABESURBVHjahI9JDgAwCALh/5/uYhHaS02MYdxByEhO31G2aAKgWOTVGnm3HN3AGpcWcK1Bl0IL+QAmeK7/Ab9fo4cAAwBXxgCllhyJzAAAAABJRU5ErkJggg=="},2532:function(t,e,a){"use strict";var i=a("b105"),n=a.n(i);n.a},"811a":function(t,e,a){"use strict";var i=a("f629"),n=a.n(i);n.a},b105:function(t,e,a){},b956:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAMAAAAVBLyFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVGMDkyMDc2ODVBNDExRTk4MTRCOTcyMEY5ODZGMUZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVGMDkyMDc3ODVBNDExRTk4MTRCOTcyMEY5ODZGMUZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUYwOTIwNzQ4NUE0MTFFOTgxNEI5NzIwRjk4NkYxRkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUYwOTIwNzU4NUE0MTFFOTgxNEI5NzIwRjk4NkYxRkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6rEqVnAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlP/AOW3MEoAAABCSURBVHjafI9RDgAwBEPb+196iSllyfzgpRQwAhFZNxBEEnYunvPeaWUgwNm0EhoqCeYgrmp50GX/U5+H1ttHgAEAWPsAqkEX3MgAAAAASUVORK5CYII="},eb31:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"record_table"}},[i("el-row",{staticClass:"filter",attrs:{gutter:20}},[i("el-col",{staticClass:"handle_input",attrs:{span:14}},[i("el-row",{staticClass:"type_bottom",attrs:{gutter:20}},[i("el-col",{staticClass:"room_type",staticStyle:{"margin-bottom":"16px"},attrs:{span:7}},[i("el-cascader",{attrs:{options:t.departmentList,"show-all-levels":!1,clearable:"",props:t.defaultParams,placeholder:t.$t("common.department")},on:{change:t.changeDpartment},model:{value:t.adddepartmentValue,callback:function(e){t.adddepartmentValue=e},expression:"adddepartmentValue"}})],1),i("el-col",{attrs:{span:7}},[i("div",{staticClass:"selectDate"},[i("el-date-picker",{ref:"checkDate",attrs:{type:"date",placeholder:t.$t("common.SelectDate"),"value-format":"yyyy-MM-dd"},on:{change:t.changeSelectDate},model:{value:t.recordTime,callback:function(e){t.recordTime=e},expression:"recordTime"}})],1)])],1)],1),i("el-col",{staticClass:"right_btn",attrs:{span:10}},[i("span",{staticClass:"refresh fr",on:{click:t.refreshAction}},[i("img",{attrs:{src:a("b956"),alt:""}})]),i("button",{staticClass:"button addbtn",on:{click:t.handleAdd}},[t._v(t._s(t.$t("common.EXPORTREPORT")))]),i("button",{staticClass:"button addbtn"},[i("a",{attrs:{href:"/smartaccess/sys/attence/exportEmps?entityId="+t.eid+"&startTime="+t.yesTime+" 00:00:00&endTime="+t.yesTime+" 00:00:00&staffId=3"}},[t._v(t._s(t.$t("common.EXPORTDATA")))])])])],1),i("el-dialog",{attrs:{title:t.$t("common.EXPORTREPORT"),visible:t.addVisible,top:"20vh",width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[i("el-row",{staticStyle:{"margin-left":"10px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[t._v("\n                "+t._s(t.$t("common.date"))+":\n                "),i("el-date-picker",{ref:"checkDate",staticClass:"monthDate",attrs:{type:"daterange","range-separator":"-","start-placeholder":t.$t("common.from"),"end-placeholder":t.$t("common.to"),"default-time":["00:00:00","00:00:00"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.exportTime,callback:function(e){t.exportTime=e},expression:"exportTime"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"bgcolor button",attrs:{type:"primary"},on:{click:function(e){t.exportReport("addform")}}},[t._v(t._s(t.$t("common.confirm")))]),i("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))])],1)],1),i("el-table",{ref:"multipleTable",staticClass:"table_inp loading-area",attrs:{data:t.tableData,border:"",id:"table_style"}},[i("el-table-column",{attrs:{prop:"userNo",label:t.$t("common.EmployeeID"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"name",label:t.$t("common.name"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"surname",label:t.$t("common.lastname"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"pname",label:t.$t("personnel.position"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"dname",label:t.$t("common.Department"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"startTime",label:t.$t("common.startTime"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"endTime",label:t.$t("common.endTime"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"inDateAttence",label:t.$t("common.WORKHOURS"),"min-width":"120"}}),i("el-table-column",{attrs:{label:t.$t("common.action"),"min-width":"120",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("common.Details"),placement:"left"}},[i("img",{staticClass:"right",attrs:{src:a("ec68"),alt:""},on:{click:function(a){t.handleEdit(e.$index,e.row)}}})])]}}])})],1),i("el-dialog",{staticClass:"recordVisible",attrs:{title:t.$t("attendRecord.AttendRecord"),visible:t.recordVisible,top:"15vh",width:"40%"},on:{"update:visible":function(e){t.recordVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-date-picker",{ref:"checkDate",staticClass:"monthDate",attrs:{type:"daterange","range-separator":"-","start-placeholder":t.$t("common.from"),"end-placeholder":t.$t("common.to"),"default-time":["00:00:00","00:00:00"],"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.changerecordDate},model:{value:t.recordSometime,callback:function(e){t.recordSometime=e},expression:"recordSometime"}}),i("button",{staticClass:"button searchRecord",on:{click:t.searchRecord}},[t._v(t._s(t.$t("common.search")))])],1)],1),i("el-row",{staticClass:"positionInfo"},[i("el-col",{attrs:{span:6}},[t._v("\n                "+t._s(t.$t("editStaff.name"))+": "),i("span",[t._v(t._s(t.positionform.name))])]),i("el-col",{attrs:{span:6}},[t._v("\n                "+t._s(t.$t("editStaff.lastName"))+": "),i("span",[t._v(t._s(t.positionform.surname))])]),i("el-col",{attrs:{span:7}},[t._v("\n                "+t._s(t.$t("common.department"))+": "),i("span",[t._v(t._s(t.positionform.department))])]),i("el-col",{attrs:{span:5}},[t._v("\n                "+t._s(t.$t("common.position"))+": "),i("span",[t._v(t._s(t.positionform.position))])])],1),i("el-table",{ref:"multipleTable",staticClass:"table_inp loading-area",attrs:{data:t.recordData,border:"","max-height":"500",id:"table_style"}},[i("el-table-column",{attrs:{prop:"dates",label:t.$t("attendRecord.Date"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"firstLog",label:t.$t("common.startTime"),"min-width":"100"}}),i("el-table-column",{attrs:{prop:"lastLog",label:t.$t("common.endTime"),"min-width":"100"}})],1)],1)],1)},n=[],s=(a("7f7f"),a("cadf"),a("551c"),a("097d"),{data:function(){return{tableData:[],recordData:[],recordTime:"",adddepartmentValue:[],departmentList:[],addpositionValue:"",selectDate:"",yesTime:"",todayTime:"",tomoTime:"",exportTime:"",positionList:[],defaultParams:{label:"name",value:"id",children:"children",expandTrigger:"hover"},recordVisible:!1,positionform:{id:"",name:"",surname:"",department:"",position:""},recordSometime:[],recordstartTime:"",recordendTime:"",AddJobName:"",addVisible:!1,idx:"",select_word:"",tabletopName:"",tdList:["2019-07-12","2019-07-09","2019-07-11","2019-07-10","2019-07-09"],eid:window.localStorage.getItem("eid")||JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id}},created:function(){this.getDate(),this.getRecordData(this.yesTime+" 00:00:00"),this.getDepartment()},methods:{getRecordData:function(t){var e=this,a=this.adddepartmentValue.length-1;this.postRequest("/sys/attence/getStaffsByDidTest",{entityId:this.eid,startTime:t,endTime:t,departmentId:this.adddepartmentValue[a]}).then(function(a){if(a&&200==a.status){var i=a.data.obj.list.map(function(t){var e=t.name,a=t.id,i=t.dname,n=t.pname,s=t.userNo,o=t.surname,l=t.endTime,r=t.addTime,d=t.startTime,c=t.inDateAttence,m=t.inDateTime,h=t.attenceOutList;if(h&&0!=h.length)return c=h[0].datas,{name:e,id:a,dname:i,pname:n,userNo:s,surname:o,startTime:d,endTime:l,addTime:r,inDateAttence:c,inDateTime:m,attenceOutList:h};c=""});e.tableData=i,t=new Date(t);var n,s=["SUN","MON","TUE","WED","THU","FRI","SAT"];n=s[t.getDay()],t="".concat(t.getDate()," ").concat(n," 打卡记录"),e.tabletopName=t}})},changeSelectDate:function(){this.recordTime?this.getRecordData(this.recordTime+" 00:00:00"):this.getRecordData(this.yesTime+" 00:00:00")},changeDpartment:function(){this.getPosition(),this.recordTime?this.getRecordData(this.recordTime+" 00:00:00"):this.getRecordData(this.yesTime+" 00:00:00")},changerecordDate:function(){},searchRecord:function(){this.getSomeRecord()},getDepartment:function(){var t=this;this.postRequest("/system/basic/depTrees",{entityId:window.localStorage.getItem("eid")||this.eid}).then(function(e){e&&200==e.status&&(t.departmentList=t.getTreeData(e.data.obj))})},getTreeData:function(t){for(var e=0;e<t.length;e++)t[e].children.length<1?t[e].children=void 0:this.getTreeData(t[e].children);return t},refreshAction:function(){},handleSearch:function(){this.getJobData()},getSomeRecord:function(){var t,e,a=this;this.recordSometime&&0!=this.recordSometime.length?(t=this.recordSometime[0],e=this.recordSometime[1]):(t="",e=""),this.postRequest("/sys/attence/getOneStaffByDidTest",{entityId:window.localStorage.getItem("eid")||this.eid,staffId:this.positionform.id,startTime:t,endTime:e}).then(function(t){if(t&&200==t.status){if(console.log(t,"somerecord"),!t.data.obj)return void(a.recordData=[]);var e=t.data.obj.map(function(t){var e=t.dates,a=t.firstLog,i=t.lastLog;return{dates:e,firstLog:a,lastLog:i}});a.recordData=e}})},handleEdit:function(t,e){this.idx=t,this.positionform.name=this.tableData[t].name,this.positionform.id=this.tableData[t].id,this.positionform.surname=this.tableData[t].surname,this.positionform.position=this.tableData[t].pname,this.positionform.department=this.tableData[t].dname,this.getSomeRecord(),this.recordVisible=!0},EditSave:function(){var t=this,e=this.tableData[this.idx].id;this.postRequest("/system/basic/updatePosition",{entityId:window.localStorage.getItem("eid")||this.eid,id:e,name:this.editform.name}).then(function(e){e&&200==e.status&&(t.getJobData(),t.editVisible=!1)})},handleAdd:function(){this.addVisible=!0},addSave:function(){var t=this;this.postRequest("/system/basic/addPosition",{entityId:window.localStorage.getItem("eid")||this.eid,name:this.AddJobName}).then(function(e){e&&200==e.status&&(t.getJobData(),t.addVisible=!1)})},getDate:function(){var t=new Date;this.todayTime=t.format("yyyy-MM-dd"),t=t.setTime(t.getTime()-864e5),this.yesTime=new Date(t).format("yyyy-MM-dd"),t=new Date(t).setTime(new Date(t).getTime()+1728e5),this.tomoTime=new Date(t).format("yyyy-MM-dd")},exportReport:function(){},excel:function(){this.postRequest("/sys/attence/exportEmp",{entityId:window.localStorage.getItem("eid")||this.eid,startTime:"2019-07-10 00:00:00",endTime:"2019-07-11 00:00:00",staffId:"3"}).then(function(t){t&&201==t.status&&console.log(t)})}}}),o=s,l=(a("2532"),a("2877")),r=Object(l["a"])(o,i,n,!1,null,null,null);e["default"]=r.exports},ec68:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE4MDQxQzBFQTkyQzExRTlCOEQ2QTBCNzU3QjIyMDQyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE4MDQxQzBGQTkyQzExRTlCOEQ2QTBCNzU3QjIyMDQyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTgwNDFDMENBOTJDMTFFOUI4RDZBMEI3NTdCMjIwNDIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTgwNDFDMERBOTJDMTFFOUI4RDZBMEI3NTdCMjIwNDIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz66w7pLAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlP/AOW3MEoAAABLSURBVHjaYmCEAAYwgHGgQozINAOSEFyYAVUMwmOAmYAQBSE0MYgQNkEMMbDzcAoyIDkGvyBRZhLvTuzexB4gWIMOeyBjRAdAgAEAEgsBTeRXHc8AAAAASUVORK5CYII="},f629:function(t,e,a){},fd6f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAMAAAAVv241AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVEMkY0QjFDOTBBMjExRTlBN0UyOTgyQkQxOUM3NDdEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVEMkY0QjFEOTBBMjExRTlBN0UyOTgyQkQxOUM3NDdEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUQyRjRCMUE5MEEyMTFFOUE3RTI5ODJCRDE5Qzc0N0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUQyRjRCMUI5MEEyMTFFOUE3RTI5ODJCRDE5Qzc0N0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5092KkAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlP/AOW3MEoAAAAvSURBVHjaYmBkZGQAAxADiiEM3IARCTAw4FUIRUAmgsNIJgfKZ4Bw4HagcAACDAAiogBVSAEC4AAAAABJRU5ErkJggg=="}}]);