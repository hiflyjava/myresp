(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-259c21a8"],{"49b0":function(e,t,i){"use strict";var a=i("c2e7"),o=i.n(a);o.a},c2e7:function(e,t,i){},d8b9:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"editjob"}},[i("titlebox",{attrs:{title:"EDIT STAFF"}}),i("div",{staticClass:"personContent"},[i("el-row",{staticStyle:{overflow:"hidden"}},[i("el-col",{staticStyle:{overflow:"hidden"},attrs:{span:7}},[i("div",{staticClass:"rt"},[i("div",{staticClass:"fingerprint"}),i("button",{staticClass:"button printbtn"},[e._v(e._s(e.$t("editStaff.RecordDeviceID")))])])]),i("el-col",{attrs:{span:17}},[i("el-form",{ref:"addform",attrs:{model:e.editform,"label-width":"150px"}},[i("el-form-item",[i("el-input",{attrs:{placeholder:e.$t("personnel.personnelNO")},model:{value:e.editform.userNo,callback:function(t){e.$set(e.editform,"userNo",t)},expression:"editform.userNo"}})],1),i("el-form-item",{attrs:{prop:"family name"}},[i("el-input",{attrs:{placeholder:e.$t("common.name")},model:{value:e.editform.name,callback:function(t){e.$set(e.editform,"name",t)},expression:"editform.name"}})],1),i("el-form-item",[i("el-input",{attrs:{placeholder:e.$t("common.lastname")},model:{value:e.editform.familyname,callback:function(t){e.$set(e.editform,"familyname",t)},expression:"editform.familyname"}})],1),i("el-form-item",{attrs:{prop:"pass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off","show-password":"",placeholder:e.$t("editStaff.Password")},model:{value:e.editform.password,callback:function(t){e.$set(e.editform,"password",t)},expression:"editform.password"}})],1),i("el-form-item",{attrs:{prop:"telephone"}},[i("el-input",{attrs:{placeholder:e.$t("editStaff.Phone")},model:{value:e.editform.phone,callback:function(t){e.$set(e.editform,"phone",t)},expression:"editform.phone"}})],1),i("el-form-item",{staticClass:"roles"},[i("country")],1),i("el-form-item",[i("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.startTime"),"value-format":"HH:mm:ss"},model:{value:e.startTimeValue,callback:function(t){e.startTimeValue=t},expression:"startTimeValue"}})],1),i("el-form-item",[i("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.endtime"),"value-format":"HH:mm:ss"},model:{value:e.endTimeValue,callback:function(t){e.endTimeValue=t},expression:"endTimeValue"}})],1),i("el-form-item",[i("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:00"},placeholder:e.$t("common.Overtime"),"value-format":"HH:mm:ss"},model:{value:e.addTimeValue,callback:function(t){e.addTimeValue=t},expression:"addTimeValue"}})],1),i("el-form-item",{attrs:{prop:"phone"}},[i("el-select",{attrs:{placeholder:e.$t("editStaff.sex")},model:{value:e.editform.sex,callback:function(t){e.$set(e.editform,"sex",t)},expression:"editform.sex"}},[i("el-option",{attrs:{label:e.$t("editStaff.male"),value:1}}),i("el-option",{attrs:{label:e.$t("editStaff.female"),value:2}})],1)],1),i("el-form-item",{staticClass:"roles"},[i("el-cascader",{attrs:{clearable:"",options:e.departmentList,"show-all-levels":!1,props:e.defaultParams,placeholder:e.$t("common.department")},on:{change:e.changeDpartment},model:{value:e.adddepartmentValue,callback:function(t){e.adddepartmentValue=t},expression:"adddepartmentValue"}})],1),i("el-form-item",{staticClass:"roles",attrs:{placeholder:"Position"}},[i("el-select",{attrs:{placeholder:e.$t("common.position"),clearable:""},model:{value:e.addpositionValue,callback:function(t){e.addpositionValue=t},expression:"addpositionValue"}},e._l(e.positionList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),i("div",{staticClass:"work_status"},[i("el-form-item",[i("el-select",{attrs:{placeholder:e.$t("editStaff.status")},model:{value:e.editform.status,callback:function(t){e.$set(e.editform,"status",t)},expression:"editform.status"}},[i("el-option",{attrs:{label:e.$t("editStaff.Active"),value:1}}),i("el-option",{attrs:{label:e.$t("editStaff.Resigned"),value:2}})],1)],1)],1),i("button",{staticClass:"button confirm",on:{click:e.editSave}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)],1)],1)},o=[],s=(i("7f7f"),i("cadf"),i("551c"),i("097d"),i("7ed4")),r={data:function(){return{defaultParams:{label:"name",value:"id",children:"children",expandTrigger:"hover"},startTimeValue:this.$route.query.startTime,endTimeValue:this.$route.query.endTime,addTimeValue:this.$route.query.addTime,select:"",tableData:[],editVisible:!1,editform:{name:this.$route.query.name,phone:this.$route.query.phone,userNo:this.$route.query.userNo,password:this.$route.query.unlockPassword,familyname:this.$route.query.surname,status:this.$route.query.enabled,sex:this.$route.query.sex,country:this.$route.query.pcname,checkinDate:"",countryId:this.$route.query.country},timeValue:this.$route.query.timeId,addcompanyValue:"",addpositionValue:this.$route.query.positionId,addcountryValue:this.$route.query.country,adddepartmentValue:[this.$route.query.departmentId]||!1,companyList:[],positionList:[],countryList:[],timeList:[],departmentList:[],AddJobName:"",addVisible:!1,idx:"",editId:this.$route.query.id,select_word:"",country_word:"",eid:JSON.parse(window.localStorage.getItem("user")).pgshHotelEntityList[0].id}},mounted:function(){this.getEditData()},created:function(){var e=this;this.getPosition(),this.getDepartment(),s["a"].$on("countryname",function(t){e.editform.countryId=t})},methods:{changeDetSelect:function(e,t){var i=[],a=[],o=0;function s(t,r){for(var n=0;n<t.length;n++){if(o=r,i[r]=t[n].id,t[n].id==e){a=i.slice(0,r+1);break}t[n].children&&(o++,s(t[n].children,o))}return a}return s(t,o)},getEditData:function(){this.editform.name=this.$route.query.name,this.editform.phone=this.$route.query.phone,this.editform.userNo=this.$route.query.userNo,this.editform.password=this.$route.query.unlockPassword,this.editform.sex=this.$route.query.sex,this.editform.familyname=this.$route.query.surname,this.editform.status=this.$route.query.enabled,this.startTimeValue=this.$route.query.startTime,this.endTimeValue=this.$route.query.endTime,this.addTimeValue=this.$route.query.addTime,this.addpositionValue=this.$route.query.positionId,this.adddepartmentValue=this.changeDetSelect(this.$route.query.departmentId,this.departmentList),this.getPosition()},getDepartment:function(){var e=this;this.postRequest("/system/basic/depTrees",{entityId:window.localStorage.getItem("eid")||this.eid}).then(function(t){t&&200==t.status&&(e.departmentList=e.getTreeData(t.data.obj),e.getEditData())})},getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].children.length<1?e[t].children=void 0:this.getTreeData(e[t].children);return e},changeDpartment:function(){this.getPosition()},getPosition:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/basic/getChildrenDepsPosition",{entityId:window.localStorage.getItem("eid")||this.eid,id:this.adddepartmentValue[t]||""}).then(function(t){if(t&&200==t.status){console.log(t.data.obj);var i=t.data.obj.map(function(e){var t=e.name,i=e.id;return{name:t,id:i}});e.positionList=i}})},refreshAction:function(){},editSave:function(){var e=this,t=this.adddepartmentValue.length-1;this.postRequest("/system/staff/updateStaff",{entityId:window.localStorage.getItem("eid")||this.eid,name:this.editform.name,phone:this.editform.phone,surname:this.editform.familyname,departmentId:this.adddepartmentValue[t],country:this.editform.countryId,startTime:this.startTimeValue,endTime:this.endTimeValue,addTime:this.addTimeValue,unlockPassword:this.editform.password,userNo:this.editform.userNo,sex:this.editform.sex,positionId:this.addpositionValue,id:this.editId}).then(function(t){t&&200==t.status&&e.$message.success("Saved Successfully")}),this.$router.push({name:"Staff Management"})}}},n=r,l=(i("49b0"),i("2877")),d=Object(l["a"])(n,a,o,!1,null,null,null);t["default"]=d.exports}}]);